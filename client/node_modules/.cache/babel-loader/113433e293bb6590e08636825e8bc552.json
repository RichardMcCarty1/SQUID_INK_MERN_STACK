{"ast":null,"code":"import _defineProperty from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/caitlin/SQUID_MERN/client/src/components/squid/Squid.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { createProject } from \"actions\";\nimport axios from \"axios\";\nimport { CookiesProvider } from 'react-cookie';\nimport LogIn from \"./components/squid/components/login\";\nimport \"styles/squid.scss\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nvar endpoint = \"https://cirdles.cs.cofc.edu/Services/squidReporting\";\n\nvar FileDownload = require(\"downloadjs\"); // checkout https://www.npmjs.com/package/rn-fetch-blob for soultion involving progress etc\n\n\nvar SquidPage = /*#__PURE__*/function (_Component) {\n  _inherits(SquidPage, _Component);\n\n  function SquidPage(props) {\n    var _this;\n\n    _classCallCheck(this, SquidPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SquidPage).call(this, props));\n    _this.handleselectedPrawnFile = _this.handleselectedPrawnFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleselectedTaskFile = _this.handleselectedTaskFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleRefMatFilterChange = _this.handleRefMatFilterChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleConcRefMatFilterChange = _this.handleConcRefMatFilterChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUpload = _this.handleUpload.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleNormalizeSBMChange = _this.handleNormalizeSBMChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleRatioCalculationMethodChange = _this.handleRatioCalculationMethodChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePreferredIndexIsotopeChange = _this.handlePreferredIndexIsotopeChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selectedPrawnFile: null,\n      selectedTaskFile: null,\n      refMatFilter: \"\",\n      concRefMatFilter: \"\",\n      normalizeSBM: true,\n      ratioCalculationMethod: false,\n      preferredIndexIsotope: \"PB_204\",\n      loaded: 0\n    };\n    return _this;\n  }\n\n  _createClass(SquidPage, [{\n    key: \"handleselectedPrawnFile\",\n    value: function handleselectedPrawnFile(event) {\n      this.setState({\n        selectedPrawnFile: event.target.files[0],\n        loaded: 0\n      });\n      var PRAWNFile = this.state.PRAWNFile;\n      localStorage.setItem('PRAWNFile', event.target.value);\n    }\n  }, {\n    key: \"handleselectedTaskFile\",\n    value: function handleselectedTaskFile(event) {\n      this.setState({\n        selectedTaskFile: event.target.files[0],\n        loaded: 0\n      });\n      var TaskFile = this.state.TaskFile;\n      localStorage.setItem('TaskFile', event.target.value);\n    } //first filter on page \n\n  }, {\n    key: \"handleRefMatFilterChange\",\n    value: function handleRefMatFilterChange(event) {\n      this.setState({\n        refMatFilter: event.target.value\n      });\n      var HandRefMatFilter = this.state.HandRefMatFilter;\n      localStorage.setItem('RefMatFilter', event.target.value);\n    }\n  }, {\n    key: \"handleConcRefMatFilterChange\",\n    value: function handleConcRefMatFilterChange(event) {\n      this.setState({\n        concRefMatFilter: event.target.value\n      });\n      var HandConcRefMatFilter = this.state.HandConcRefMatFilter;\n      localStorage.setItem('ConcRefMatFilter', event.target.value);\n    }\n  }, {\n    key: \"handleNormalizeSBMChange\",\n    value: function handleNormalizeSBMChange(changeEvent) {\n      this.setState({\n        normalizeSBM: changeEvent.target.value\n      });\n      var SBMChange = this.state.SBMChange;\n      localStorage.setItem('SBMChange', changeEvent.target.value);\n    }\n  }, {\n    key: \"handleRatioCalculationMethodChange\",\n    value: function handleRatioCalculationMethodChange(changeEvent) {\n      this.setState({\n        ratioCalculationMethod: changeEvent.target.id === \"ratioCalcMethodRegression\"\n      });\n      var RatioCalculationMethodChange = this.state.RatioCalculationMethodChange;\n      localStorage.setItem('RatioCalculationMethodChange', changeEvent.target.id);\n    }\n  }, {\n    key: \"handlePreferredIndexIsotopeChange\",\n    value: function handlePreferredIndexIsotopeChange(changeEvent) {\n      this.setState({\n        preferredIndexIsotope: changeEvent.target.value\n      });\n    }\n  }, {\n    key: \"handleUpload\",\n    value: function handleUpload() {\n      var _this2 = this;\n\n      var data = new FormData();\n\n      if (this.state.selectedPrawnFile != null && this.state.selectedTaskFile != null) {\n        data.append(\"prawnFile\", this.state.selectedPrawnFile);\n        data.append(\"taskFile\", this.state.selectedTaskFile);\n        data.append(\"useSBM\", this.state.normalizeSBM);\n        data.append(\"userLinFits\", this.state.ratioCalculationMethod);\n        data.append(\"refMatFilter\", this.state.refMatFilter);\n        data.append(\"concRefMatFilter\", this.state.concRefMatFilter);\n        data.append(\"prefIndexIso\", this.state.preferredIndexIsotope);\n        axios.post(endpoint, data, {\n          responseType: \"blob\",\n          onUploadProgress: function onUploadProgress(ProgressEvent) {\n            _this2.setState({\n              loaded: ProgressEvent.loaded / ProgressEvent.total * 100\n            });\n          }\n        }).then(function (response) {\n          FileDownload(response.data, \"squid-reports.zip\", \"application/zip\"), {\n            onDownloadProgress: function onDownloadProgress(ProgressEvent) {\n              _this2.setState({\n                loaded: ProgressEvent.loaded / ProgressEvent.total * 100\n              });\n            }\n          }, _this2.setState({\n            loaded: 0\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"squid container my-3 p-3 d-flex flex-column justify-content-center border border-squid rounded\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"my-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }\n      }, \"Zipped Prawn XML file:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"custom-file-input my-auto\",\n        type: \"file\",\n        name: \"prawnFile\",\n        id: \"prawnFileInput\",\n        onChange: this.handleselectedPrawnFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"prawnFileInput\",\n        className: \"custom-file-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }\n      }, this.state.selectedPrawnFile && shortenFileName(this.state.selectedPrawnFile.name) || \"Choose File\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"my-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }\n      }, \"Squid2.* Task XLS file:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"custom-file-input my-auto\",\n        type: \"file\",\n        name: \"taskFile\",\n        id: \"taskFileInput\",\n        onChange: this.handleselectedTaskFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"taskFileInput\",\n        className: \"custom-file-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }\n      }, this.state.selectedTaskFile && shortenFileName(this.state.selectedTaskFile.name) || \"Choose File\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"refMatFilterInput\",\n        className: \"col my-auto text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }\n      }, \"Reference Material Sample Name Filter:\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control col my-auto\",\n        type: \"text\",\n        name: \"refMatFilter\",\n        id: \"refMatFilterInput\",\n        value: this.state.refMatFilter,\n        onChange: this.handleRefMatFilterChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"concRefMatFilterInput\",\n        className: \"col my-auto text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }\n      }, \"Concentration Reference Material Sample Name Filter:\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control col my-auto\",\n        type: \"text\",\n        name: \"concRefMatFilter\",\n        id: \"concRefMatFilterInput\",\n        value: this.state.concRefMatFilter,\n        onChange: this.handleConcRefMatFilterChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"col my-auto text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }\n      }, \"Normalize Ion Counts for SBM?\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", (_React$createElement = {\n        className: \"form-check-input\",\n        type: \"radio\",\n        name: \"normalizeSBM\",\n        id: \"normalizeSBMYes\",\n        checked: this.state.normalizeSBM,\n        onChange: this.handleNormalizeSBMChange\n      }, _defineProperty(_React$createElement, \"onChange\", console.log('filter added')), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }), _React$createElement)), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"normalizeSBMYes\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, \"Yes\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        name: \"normalizeSBM\",\n        id: \"normalizeSBMNo\",\n        checked: this.state.normalizeSBM,\n        onChange: this.handleNormalizeSBMChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"normalizeSBMNo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }\n      }, \"No\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"col my-auto text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }\n      }, \"Ratio Calculation Method:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        name: \"ratioCalcMethod\",\n        id: \"ratioCalcMethodRegression\",\n        checked: this.state.ratioCalculationMethod,\n        onChange: this.handleRatioCalculationMethodChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"ratioCalcMethodRegression\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 17\n        }\n      }, \"Linear regression to burn mid-time\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        name: \"ratioCalcMethod\",\n        id: \"ratioCalcMethodAverage\",\n        checked: !this.state.ratioCalculationMethod,\n        onChange: this.handleRatioCalculationMethodChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"normalizeSBMNo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 17\n        }\n      }, \"Spot average (time-invariant)\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"col my-auto text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }\n      }, \"Preferred Index Isotope:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        value: \"PB_204\",\n        name: \"indexIsotope\",\n        id: \"indexIsotope204\",\n        checked: this.state.preferredIndexIsotope === \"PB_204\",\n        onChange: this.handlePreferredIndexIsotopeChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"indexIsotope204\",\n        className: \"form-check-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, \"204Pb\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        value: \"PB_207\",\n        name: \"indexIsotope\",\n        id: \"indexIsotope207\",\n        checked: this.state.preferredIndexIsotope === \"PB_207\",\n        onChange: this.handlePreferredIndexIsotopeChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"indexIsotope207\",\n        className: \"form-check-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 17\n        }\n      }, \"207Pb\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        value: \"PB_208\",\n        name: \"indexIsotope\",\n        id: \"indexIsotope208\",\n        checked: this.state.preferredIndexIsotope === \"PB_208\",\n        onChange: this.handlePreferredIndexIsotopeChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"indexIsotope204\",\n        className: \"form-check-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 17\n        }\n      }, \"208Pb\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row justify-content-center text-center text-danger m-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }\n      }, \"Note: parameter models are currently GA defaults (see Squid app).\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row justify-content-center m-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-squid rounded-pill\",\n        onClick: this.handleUpload,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }\n      }, \"Click here to Upload data for processing ... wait for returned results\")), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }\n      }, \" Upload progress:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"progress\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"progress-bar\",\n        role: \"progressbar\",\n        \"aria-valuenow\": this.state.loaded,\n        \"aria-valuemin\": 0,\n        \"aria-valuemax\": 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mx-auto text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 9\n        }\n      }, \"Visit us on\\xA0\", /*#__PURE__*/React.createElement(\"a\", {\n        href: \"https://github.com/CIRDLES/Squid\",\n        target: \"_blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }\n      }, \"Github\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mx-auto text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 9\n        }\n      }, \"Go to\\xA0\", /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/files\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }\n      }, \" files\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mx-auto text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 17\n        }\n      }, \"Go to\\xA0\", /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }\n      }, \" login\"))));\n    }\n  }]);\n\n  return SquidPage;\n}(Component);\n\nfunction shortenFileName(fileName) {\n  return fileName && fileName.length > 50 ? fileName.substring(0, 47) + \"...\" : fileName;\n}\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    createProject: bindActionCreators(createProject, dispatch)\n  };\n}\n\nexport default SquidPage;","map":{"version":3,"sources":["/Users/caitlin/SQUID_MERN/client/src/components/squid/Squid.js"],"names":["React","Component","Fragment","bindActionCreators","createProject","axios","CookiesProvider","LogIn","BrowserRouter","Router","Switch","Route","Link","endpoint","FileDownload","require","SquidPage","props","handleselectedPrawnFile","bind","handleselectedTaskFile","handleRefMatFilterChange","handleConcRefMatFilterChange","handleUpload","handleNormalizeSBMChange","handleRatioCalculationMethodChange","handlePreferredIndexIsotopeChange","state","selectedPrawnFile","selectedTaskFile","refMatFilter","concRefMatFilter","normalizeSBM","ratioCalculationMethod","preferredIndexIsotope","loaded","event","setState","target","files","PRAWNFile","localStorage","setItem","value","TaskFile","HandRefMatFilter","HandConcRefMatFilter","changeEvent","SBMChange","id","RatioCalculationMethodChange","data","FormData","append","post","responseType","onUploadProgress","ProgressEvent","total","then","response","onDownloadProgress","shortenFileName","name","console","log","fileName","length","substring","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["// @flow\nimport React, { Component, Fragment } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { createProject } from \"actions\";\nimport axios from \"axios\";\nimport { CookiesProvider } from 'react-cookie';\nimport LogIn from \"./components/squid/components/login\";\nimport \"styles/squid.scss\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nconst endpoint = \"https://cirdles.cs.cofc.edu/Services/squidReporting\";\nconst FileDownload = require(\"downloadjs\");\n// checkout https://www.npmjs.com/package/rn-fetch-blob for soultion involving progress etc\n\nclass SquidPage extends Component {\n  constructor(props) {\n    super(props);\n    this.handleselectedPrawnFile = this.handleselectedPrawnFile.bind(this);\n    this.handleselectedTaskFile = this.handleselectedTaskFile.bind(this);\n    this.handleRefMatFilterChange = this.handleRefMatFilterChange.bind(this);\n    this.handleConcRefMatFilterChange = this.handleConcRefMatFilterChange.bind(\n      this\n    );\n    this.handleUpload = this.handleUpload.bind(this);\n    this.handleNormalizeSBMChange = this.handleNormalizeSBMChange.bind(this);\n    this.handleRatioCalculationMethodChange = this.handleRatioCalculationMethodChange.bind(\n      this\n    );\n    this.handlePreferredIndexIsotopeChange = this.handlePreferredIndexIsotopeChange.bind(\n      this\n    );\n\n    this.state = {\n      selectedPrawnFile: null,\n      selectedTaskFile: null,\n      refMatFilter: \"\",\n      concRefMatFilter: \"\",\n      normalizeSBM: true,\n      ratioCalculationMethod: false,\n      preferredIndexIsotope: \"PB_204\",\n      loaded: 0\n    };\n    \n    \n    \n  }\n\n  handleselectedPrawnFile(event) {\n    this.setState({\n      selectedPrawnFile: event.target.files[0],\n      loaded: 0\n    });\n    const {PRAWNFile} = this.state; \n    localStorage.setItem('PRAWNFile', event.target.value)\n  }\n\n  handleselectedTaskFile(event) {\n    this.setState({\n      selectedTaskFile: event.target.files[0],\n      loaded: 0\n    });\n    const {TaskFile} = this.state; \n    localStorage.setItem('TaskFile', event.target.value)\n  }\n//first filter on page \n  handleRefMatFilterChange(event) {\n    this.setState({ refMatFilter: event.target.value });\n    const {HandRefMatFilter} = this.state; \n    localStorage.setItem('RefMatFilter', event.target.value)\n  }\n\n  handleConcRefMatFilterChange(event) {\n    this.setState({ concRefMatFilter: event.target.value });\n    const {HandConcRefMatFilter} = this.state; \n    localStorage.setItem('ConcRefMatFilter', event.target.value)\n  }\n\n  handleNormalizeSBMChange(changeEvent) {\n    this.setState({ normalizeSBM: changeEvent.target.value});\n    const {SBMChange} = this.state; \n    localStorage.setItem('SBMChange', changeEvent.target.value)\n  }\n\n  handleRatioCalculationMethodChange(changeEvent) {\n    this.setState({\n      ratioCalculationMethod:\n        changeEvent.target.id === \"ratioCalcMethodRegression\"\n    });\n    const {RatioCalculationMethodChange} = this.state; \n    localStorage.setItem('RatioCalculationMethodChange', changeEvent.target.id)\n  }\n\n  handlePreferredIndexIsotopeChange(changeEvent) {\n    this.setState({\n      preferredIndexIsotope: changeEvent.target.value\n    });\n  }\n\n  handleUpload() {\n    const data = new FormData();\n    if (\n      this.state.selectedPrawnFile != null &&\n      this.state.selectedTaskFile != null\n    ) {\n      data.append(\"prawnFile\", this.state.selectedPrawnFile);\n      data.append(\"taskFile\", this.state.selectedTaskFile);\n      data.append(\"useSBM\", this.state.normalizeSBM);\n      data.append(\"userLinFits\", this.state.ratioCalculationMethod);\n      data.append(\"refMatFilter\", this.state.refMatFilter);\n      data.append(\"concRefMatFilter\", this.state.concRefMatFilter);\n      data.append(\"prefIndexIso\", this.state.preferredIndexIsotope);\n\n      axios\n        .post(endpoint, data, {\n          responseType: \"blob\",\n          onUploadProgress: ProgressEvent => {\n            this.setState({\n              loaded: (ProgressEvent.loaded / ProgressEvent.total) * 100\n            });\n          }\n        })\n        .then(response => {\n          FileDownload(response.data, \"squid-reports.zip\", \"application/zip\"),\n            {\n              onDownloadProgress: ProgressEvent => {\n                this.setState({\n                  loaded: (ProgressEvent.loaded / ProgressEvent.total) * 100\n                });\n              }\n            },\n            this.setState({ loaded: 0 });\n        });\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"squid container my-3 p-3 d-flex flex-column justify-content-center border border-squid rounded\">\n          <div className=\"row m-3\">\n            <div className=\"col\">\n              <label className=\"my-auto\">Zipped Prawn XML file:</label>\n              <div className=\"custom-file\">\n                <input\n                  className=\"custom-file-input my-auto\"\n                  type=\"file\"\n                  name=\"prawnFile\"\n                  id=\"prawnFileInput\"\n                  onChange={this.handleselectedPrawnFile}\n                />\n                <label htmlFor=\"prawnFileInput\" className=\"custom-file-label\">\n                  {(this.state.selectedPrawnFile &&\n                    shortenFileName(this.state.selectedPrawnFile.name)) ||\n                    \"Choose File\"}\n                </label>\n              </div>\n            </div>\n            <div className=\"col\">\n              <label className=\"my-auto\">Squid2.* Task XLS file:</label>\n              <div className=\"custom-file\">\n                <input\n                  className=\"custom-file-input my-auto\"\n                  type=\"file\"\n                  name=\"taskFile\"\n                  id=\"taskFileInput\"\n                  onChange={this.handleselectedTaskFile}\n                />\n                <label htmlFor=\"taskFileInput\" className=\"custom-file-label\">\n                  {(this.state.selectedTaskFile &&\n                    shortenFileName(this.state.selectedTaskFile.name)) ||\n                    \"Choose File\"}\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row m-3\">\n            <label\n              htmlFor=\"refMatFilterInput\"\n              className=\"col my-auto text-right\"\n            >\n              Reference Material Sample Name Filter:\n            </label>\n            <input\n              className=\"form-control col my-auto\"\n              type=\"text\"\n              name=\"refMatFilter\"\n              id=\"refMatFilterInput\"\n              value={this.state.refMatFilter}\n              onChange={this.handleRefMatFilterChange}\n            />\n          </div>\n\n          <div className=\"row m-3\">\n            <label\n              htmlFor=\"concRefMatFilterInput\"\n              className=\"col my-auto text-right\"\n            >\n              Concentration Reference Material Sample Name Filter:\n            </label>\n            <input\n              className=\"form-control col my-auto\"\n              type=\"text\"\n              name=\"concRefMatFilter\"\n              id=\"concRefMatFilterInput\"\n              value={this.state.concRefMatFilter}\n              onChange={this.handleConcRefMatFilterChange}\n            />\n          </div>\n\n          <div className=\"row m-3\">\n            <label className=\"col my-auto text-right\">\n              Normalize Ion Counts for SBM?\n            </label>\n            <div className=\"col\">\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  name=\"normalizeSBM\"\n                  id=\"normalizeSBMYes\"\n                  checked={this.state.normalizeSBM}\n                  onChange={this.handleNormalizeSBMChange}\n                  onChange={console.log('filter added')}\n              \n                />\n                <label className=\"form-check-label\" htmlFor=\"normalizeSBMYes\">\n                  Yes\n                </label>\n              </div>\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  name=\"normalizeSBM\"\n                  id=\"normalizeSBMNo\"\n                  checked={this.state.normalizeSBM}\n                  onChange={this.handleNormalizeSBMChange}\n                />\n                <label className=\"form-check-label\" htmlFor=\"normalizeSBMNo\">\n                  No\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row m-3\">\n            <label className=\"col my-auto text-right\">\n              Ratio Calculation Method:\n            </label>\n            <div className=\"col\">\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  name=\"ratioCalcMethod\"\n                  id=\"ratioCalcMethodRegression\"\n                  checked={this.state.ratioCalculationMethod}\n                  onChange={this.handleRatioCalculationMethodChange}\n                />\n                <label\n                  className=\"form-check-label\"\n                  htmlFor=\"ratioCalcMethodRegression\"\n                >\n                  Linear regression to burn mid-time\n                </label>\n              </div>\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  name=\"ratioCalcMethod\"\n                  id=\"ratioCalcMethodAverage\"\n                  checked={!this.state.ratioCalculationMethod}\n                  onChange={this.handleRatioCalculationMethodChange}\n                />\n                <label className=\"form-check-label\" htmlFor=\"normalizeSBMNo\">\n                  Spot average (time-invariant)\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row m-3\">\n            <label className=\"col my-auto text-right\">\n              Preferred Index Isotope:\n            </label>\n            <div className=\"col\">\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  value=\"PB_204\"\n                  name=\"indexIsotope\"\n                  id=\"indexIsotope204\"\n                  checked={this.state.preferredIndexIsotope === \"PB_204\"}\n                  onChange={this.handlePreferredIndexIsotopeChange}\n                />\n                <label htmlFor=\"indexIsotope204\" className=\"form-check-label\">\n                  204Pb\n                </label>\n              </div>\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  value=\"PB_207\"\n                  name=\"indexIsotope\"\n                  id=\"indexIsotope207\"\n                  checked={this.state.preferredIndexIsotope === \"PB_207\"}\n                  onChange={this.handlePreferredIndexIsotopeChange}\n                />\n                <label htmlFor=\"indexIsotope207\" className=\"form-check-label\">\n                  207Pb\n                </label>\n              </div>\n              <div className=\"form-check\">\n                <input\n                  className=\"form-check-input\"\n                  type=\"radio\"\n                  value=\"PB_208\"\n                  name=\"indexIsotope\"\n                  id=\"indexIsotope208\"\n                  checked={this.state.preferredIndexIsotope === \"PB_208\"}\n                  onChange={this.handlePreferredIndexIsotopeChange}\n                  \n                />\n                <label htmlFor=\"indexIsotope204\" className=\"form-check-label\">\n                  208Pb\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row justify-content-center text-center text-danger m-2\">\n            Note: parameter models are currently GA defaults (see Squid app).\n          </div>\n          <div className=\"row justify-content-center m-2\">\n            <button\n              className=\"btn btn-outline-squid rounded-pill\"\n              onClick={this.handleUpload}\n            >\n              Click here to Upload data for processing ... wait for returned\n              results\n            </button>\n          </div>\n\n          <h4 className=\"mt-4\"> Upload progress:</h4>\n          <div className=\"progress\">\n            <div\n              className=\"progress-bar\"\n              role=\"progressbar\"\n              aria-valuenow={this.state.loaded}\n              aria-valuemin={0}\n              aria-valuemax={100}\n            />\n          </div>\n        </div>\n\n        <div className=\"mx-auto text-center\">\n          Visit us on&nbsp;\n          <a href=\"https://github.com/CIRDLES/Squid\" target=\"_blank\">\n            Github\n          </a>\n        </div>\n        \n        \n        <div className=\"mx-auto text-center\">\n          Go to&nbsp;\n          <li>\n            <Link to=\"/files\"> files</Link>\n          </li>\n        </div>\n        \n                <div className=\"mx-auto text-center\">\n          Go to&nbsp;\n          <li>\n            <Link to=\"/login\"> login</Link>\n          </li>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nfunction shortenFileName(fileName) {\n  return (fileName && fileName.length > 50) ? (fileName.substring(0, 47) + \"...\") : fileName;\n}\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    createProject: bindActionCreators(createProject, dispatch)\n  };\n}\n\nexport default SquidPage;\n"]},"metadata":{},"sourceType":"module"}