{"ast":null,"code":"import _classCallCheck from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/caitlin/SQUID_MERN/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/caitlin/SQUID_MERN/client/src/components/myfiles/MyFiles.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport LinkButton from \"../../actions/authActions\";\n\nvar MyFiles = /*#__PURE__*/function (_Component) {\n  _inherits(MyFiles, _Component);\n\n  function MyFiles(props) {\n    var _this;\n\n    _classCallCheck(this, MyFiles);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MyFiles).call(this, props));\n    _this.state = {\n      files: [],\n      file: ''\n    };\n    _this.loadFiles = _this.loadFiles.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MyFiles, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadFiles();\n    }\n  }, {\n    key: \"loadFiles\",\n    value: function loadFiles() {\n      var _this2 = this;\n\n      fetch('/api/files').then(function (res) {\n        return res.json();\n      }).then(function (files) {\n        if (files.message) {\n          console.log('No Files');\n\n          _this2.setState({\n            files: []\n          });\n        } else {\n          _this2.setState({\n            files: files\n          });\n        }\n      });\n    }\n  }, {\n    key: \"fileChanged\",\n    value: function fileChanged(event) {\n      var f = event.target.files[0];\n      this.setState({\n        file: f\n      });\n    }\n  }, {\n    key: \"deleteFile\",\n    value: function deleteFile(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      var id = event.target.id;\n      fetch('/api/files/' + id, {\n        method: 'DELETE'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        console.log(response);\n        if (response.success) _this3.loadFiles();else alert('Delete Failed');\n      });\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function uploadFile(event) {\n      var _this4 = this;\n\n      event.preventDefault();\n      var data = new FormData();\n      data.append('file', this.state.file);\n      fetch('/api/files', {\n        method: 'POST',\n        body: data\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.success) {\n          _this4.loadFiles();\n        } else {\n          alert('Upload failed');\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var files = this.state.files;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(\"header\", {\n        className: \"App-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"App-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      }, \"Welcome to React\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        onChange: this.fileChanged.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.uploadFile.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }\n      }, \"Upload\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"App-table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 19\n        }\n      }, \"File\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 19\n        }\n      }, \"Uploaded\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 19\n        }\n      }, \"Size\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 19\n        }\n      }))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, files.map(function (file, index) {\n        var d = new Date(file.uploadDate);\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: index,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: \"http://localhost:3001/api/files/\".concat(file.filename),\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }\n        }, file.filename)), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }\n        }, \"\".concat(d.toLocaleDateString(), \" \").concat(d.toLocaleTimeString())), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }\n        }, Math.round(file.length / 100) / 10 + 'KB'), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: _this5.deleteFile.bind(_this5),\n          id: file._id,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }\n        }, \"Remove\")));\n      })))));\n    }\n  }]);\n\n  return MyFiles;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nexport default connect(mapStateToProps, {})(MyFiles);","map":{"version":3,"sources":["/Users/caitlin/SQUID_MERN/client/src/components/myfiles/MyFiles.js"],"names":["React","Component","connect","LinkButton","MyFiles","props","state","files","file","loadFiles","bind","fetch","then","res","json","message","console","log","setState","event","f","target","preventDefault","id","method","response","success","alert","data","FormData","append","body","fileChanged","uploadFile","map","index","d","Date","uploadDate","filename","toLocaleDateString","toLocaleTimeString","Math","round","length","deleteFile","_id","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport LinkButton from \"../../actions/authActions\";\n\n\nclass MyFiles extends Component {\n \n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      file: ''\n    }\n    this.loadFiles = this.loadFiles.bind(this);\n  }\n  componentDidMount() {\n    this.loadFiles();\n  }\n  loadFiles() {\n    fetch('/api/files')\n      .then(res => res.json())\n      .then(files => {\n        if (files.message) {\n          console.log('No Files');\n          this.setState({ files: [] })\n        } else {\n          this.setState({ files })\n        }\n      });\n  }\n fileChanged(event) {\n   const f = event.target.files[0];\n   this.setState({\n     file: f\n   });\n }\n deleteFile(event) {\n   event.preventDefault();\n   const id = event.target.id;\n   fetch('/api/files/'+id, {\n     method: 'DELETE'\n   }).then(res => res.json())\n     .then(response => {\n       console.log(response);\n       if (response.success) this.loadFiles()\n       else alert('Delete Failed');\n     })\n }\n uploadFile(event) {\n    event.preventDefault();\n    let data = new FormData();\n    data.append('file', this.state.file);\n   fetch('/api/files', {\n     method: 'POST',\n     body: data\n   }).then(res => res.json())\n     .then(data => {\n       if (data.success) {\n       this.loadFiles();\n     } else {\n       alert('Upload failed');\n     }\n   });\n }\nrender() {\n  const { files } = this.state;\n  return (\n       <div className=\"App\">\n        <header className=\"App-header\">\n          <h1 className=\"App-title\">Welcome to React</h1>\n        </header>\n        <div className=\"App-content\">\n          <input type=\"file\" onChange={this.fileChanged.bind(this)}/>\n          <button onClick={this.uploadFile.bind(this)}>Upload</button>\n          <table className=\"App-table\">\n            <thead>\n              <tr>\n                  <th>File</th>\n                  <th>Uploaded</th>\n                  <th>Size</th>\n                  <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {files.map((file, index) => {\n                var d = new Date(file.uploadDate);\n                return (\n                  <tr key={index}>\n                    <td><a href={`http://localhost:3001/api/files/${file.filename}`}>{file.filename}</a></td>\n                    <td>{`${d.toLocaleDateString()} ${d.toLocaleTimeString()}`}</td>\n                    <td>{(Math.round(file.length/100) / 10)+'KB'}</td>\n                    <td><button onClick={this.deleteFile.bind(this)} id={file._id}>Remove</button></td>\n                  </tr>\n                )\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n);\n }\n}\n  \n \n  \n  const mapStateToProps = state => ({\n    auth: state.auth\n  });\n  \n  export default connect(\n    mapStateToProps,\n    {}\n  )(MyFiles);\n  "]},"metadata":{},"sourceType":"module"}